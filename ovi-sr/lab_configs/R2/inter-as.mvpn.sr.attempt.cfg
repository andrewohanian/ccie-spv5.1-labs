!! IOS XR Configuration 6.6.3.21I
!! Last configuration change at Mon Dec 11 15:22:33 2023 by support
!
hostname R2
group ISIS
 router isis '1'
  is-type level-2-only
  address-family ipv4 unicast
   metric-style wide
   advertise passive-only
   segment-routing mpls
  !
  interface 'Lo.*'
   passive
   address-family ipv4 unicast
   !
  !
  interface 'GigabitEthernet.*'
   point-to-point
   address-family ipv4 unicast
   !
  !
 !
end-group
domain lookup disable
vrf BLUE
 rd 2.2.2.1:102
 address-family ipv4 unicast
  import route-target
   999:999
  !
  export route-target
   999:999
  !
 !
!
line console
 exec-timeout 0 0
!
interface Loopback1
 ipv4 address 2.2.2.1 255.255.255.255
!
interface Loopback2
 ipv4 address 2.2.2.2 255.255.255.255
!
interface Loopback3
 ipv4 address 2.2.2.3 255.255.255.255
!
interface MgmtEth0/0/CPU0/0
 shutdown
!
interface GigabitEthernet0/0/0/0
 shutdown
!
interface GigabitEthernet0/0/0/1
 shutdown
!
interface GigabitEthernet0/0/0/2
 vrf BLUE
 ipv4 address 192.168.102.2 255.255.255.0
!
interface GigabitEthernet0/0/0/3
 ipv4 address 10.2.3.2 255.255.255.0
!
interface GigabitEthernet0/0/0/4
 ipv4 address 10.2.4.2 255.255.255.0
!
interface GigabitEthernet0/0/0/5
 shutdown
!
interface GigabitEthernet0/0/0/6
 shutdown
!
interface GigabitEthernet0/0/0/7
 shutdown
!
interface GigabitEthernet0/0/0/8
 shutdown
!
interface GigabitEthernet0/0/0/9
 shutdown
!
interface GigabitEthernet0/0/0/10
 shutdown
!
interface GigabitEthernet0/0/0/11
 shutdown
!
interface GigabitEthernet0/0/0/12
 shutdown
!
interface GigabitEthernet0/0/0/13
 shutdown
!
route-policy PASS
  pass
end-policy
!
router isis 1
 apply-group ISIS
 net 49.0001.0000.0000.0002.00
 address-family ipv4 unicast
  mpls ldp auto-config
 !
 interface Loopback1
  address-family ipv4 unicast
   prefix-sid index 2
  !
 !
 interface GigabitEthernet0/0/0/3
  address-family ipv4 unicast
   metric 50
  !
 !
 interface GigabitEthernet0/0/0/4
 !
!
router bgp 100
 mvpn
 address-family ipv4 unicast
 !
 address-family vpnv4 unicast
 !
 address-family ipv4 mvpn
 !
 neighbor 7.7.7.1
  remote-as 200
  ebgp-multihop 255
  update-source Loopback1
  address-family vpnv4 unicast
   route-policy PASS in
   route-policy PASS out
  !
  address-family ipv4 mvpn
   route-policy PASS in
   route-policy PASS out
  !
 !
 neighbor 8.8.8.1
  remote-as 200
  ebgp-multihop 255
  update-source Loopback1
  address-family vpnv4 unicast
   route-policy PASS in
   route-policy PASS out
  !
  address-family ipv4 mvpn
   route-policy PASS in
   route-policy PASS out
  !
 !
 neighbor 9.9.9.1
  remote-as 100
  update-source Loopback1
  address-family ipv4 labeled-unicast
  !
  address-family vpnv4 unicast
  !
  address-family ipv4 mvpn
  !
 !
 vrf BLUE
  bgp router-id 2.2.2.1
  bgp unsafe-ebgp-policy
  address-family ipv4 unicast
  !
  address-family ipv4 mvpn
  !
  neighbor 192.168.102.102
   remote-as 102
   address-family ipv4 unicast
   !
  !
 !
!
mpls ldp
 capabilities sac ipv4-disable
 mldp
  address-family ipv4
   make-before-break delay 600
  !
 !
 session protection
!
multicast-routing
 address-family ipv4
  interface Loopback1
   enable
  !
 !
 vrf BLUE
  address-family ipv4
   mdt source Loopback1
   interface all enable
   bgp auto-discovery mldp
   !
   mdt partitioned mldp ipv4 p2mp
  !
 !
!
segment-routing
 global-block 16000 23999
!
end
