!! IOS XR Configuration 6.3.1
!! Last configuration change at Thu Sep 28 12:22:22 2023 by cisco
!
hostname XR1
cdp
vrf VPN_A
 address-family ipv4 unicast
  import route-target
   200:1
  !
  export route-target
   200:1
  !
 !
!
vrf VPN_B
 address-family ipv4 unicast
  import route-target
   200:2
  !
  export route-target
   200:2
  !
 !
!
line console
 exec-timeout 0 0
!
interface Loopback0
 ipv4 address 19.19.19.19 255.255.255.255
!
interface GigabitEthernet0/0/0/0
 cdp
!
interface GigabitEthernet0/0/0/0.30
 vrf VPN_A
 ipv4 address 30.1.19.19 255.255.255.0
 encapsulation dot1q 30
!
interface GigabitEthernet0/0/0/0.40
 vrf VPN_B
 ipv4 address 40.1.19.19 255.255.255.0
 encapsulation dot1q 40
!
interface GigabitEthernet0/0/0/0.419
 ipv4 address 20.4.19.19 255.255.255.0
 encapsulation dot1q 419
!
router isis 1
 is-type level-2-only
 net 49.0002.0000.0000.0019.00
 address-family ipv4 unicast
  metric-style wide
  mpls ldp auto-config
 !
 interface Loopback0
  passive
  address-family ipv4 unicast
  !
 !
 interface GigabitEthernet0/0/0/0.419
  point-to-point
  address-family ipv4 unicast
  !
 !
!
router ospf 1
 vrf VPN_A
  redistribute bgp 200
  area 0
   interface GigabitEthernet0/0/0/0.30
   !
  !
 !
!
router ospf 2
 vrf VPN_B
  redistribute bgp 200
  area 0
   interface GigabitEthernet0/0/0/0.40
   !
  !
 !
!
router bgp 200
 address-family ipv4 unicast
 !
 address-family vpnv4 unicast
 !
 neighbor 20.20.20.20
  remote-as 200
  update-source Loopback0
  address-family vpnv4 unicast
  !
 !
 vrf VPN_A
  rd 1:19
  address-family ipv4 unicast
   redistribute ospf 1
  !
 !
 vrf VPN_B
  rd 2:19
  address-family ipv4 unicast
   redistribute ospf 2
  !
 !
!
mpls ldp
!
end
